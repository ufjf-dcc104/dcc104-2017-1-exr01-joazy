<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>DCC104 - Exemplo 01</title>
    <script src="Sprite.js"
    charset="utf-8"></script>
  </head>
  <body>
<h1>DCC104- Exemplo 01</h1>
<canvas width="800" height="800"></canvas>
<script>
var eCanvas =
document.getElementsByTagName("canvas")[0];
var ctx = eCanvas.getContext("2d");

var azul = new Sprite();


var fps = 60;
var atual = new Date();
var anterior = new Date();
var dt = 1/fps;

desenha();

function desenha(){
  requestAnimationFrame(desenha);
  atual = new Date();
  dt = (atual - anterior)/1000;
  ctx.clearRect(0,0,eCanvas.width, eCanvas.height)
  azul.x += 10*dt;
  ctx.fillStyle = "darkgreen";
  ctx.fillText("dt: "+dt+"fps:"+Math.floor(1/dt), 10, 10);

azul.mover(dt);
azul.desenhar(ctx);
desenhaVermelho(ctx);
anterior = atual;
}

function desenhaAzul(ctx){
ctx.fillStyle = "blue";
ctx.fillRect(azul.x,azul.y,15,15);
ctx.lineWidth = 2;
ctx.strokeRect(azul.x,azul.y,15,15);
}

function desenhaVermelho(ctx){
ctx.fillStyle = "red";
ctx.fillRect(50,50,15,15);
ctx.lineWidth = 2;
ctx.strokeRect(50,50,15,15);
}

addEventListener("keydown", function(e)
{
  console.log(e.keyCode);
  switch(e.keyCode){
    case 37:
    azul.ax= -100;
    break;
    case 38:
    azul.ay= -100;
    break;
    case 39:
      azul.ax= +100;
      break;
      case 40:
      azul.ay= +100;
      break;

  }
})

addEventListener("keyup", function(e)
{
  console.log(e.keyCode);
  switch(e.keyCode){
    case 37:
    azul.ax= -100;
    break;
    case 38:
    azul.ay= -100;
    break;
    case 39:
      azul.ax= +100;
      break;
      case 40:
      azul.ay= +100;
      break;

  }
})
</script>
  </body>
</html>
